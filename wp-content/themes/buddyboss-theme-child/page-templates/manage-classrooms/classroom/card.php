<?php 
$is_member = groups_is_user_member( get_current_user_id(), $school->bp_group_id);

if(empty($school->bp_group_id)) $is_member = true;

if($is_school_admin) $is_member = true;

if($is_member){
?>
    <div class="classroom group-<?=$school->ID?>" data-gid="<?=$school->ID?>">
        <?php 
        if(!empty($school->cover_photo)){
            ?>
            <img src="<?=$school->cover_photo?>" class="cover-photo"/>
            <?php
        }else{
            ?><div class="no-cover-photo"></div><?php
        }
        ?>
        <a href="<?=$school->bp_url?>" class="avatar-container classroom-action" <?php /*data-action="manage_classroom" data-tab="tab-classroom" data-schoolid="<?=$school->ID?>" */?> >

            <?php 
            if(!empty($school->avatar)){
                ?>
                <img src="<?=$school->avatar?>" class="avatar-photo"/>
                <?php
            }else{
                ?>
                <div class="no-avatar"></div>
                <?php
            }
            ?>
        </a>

        <button type="button" class="cog">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12.0117 9.15474C11.3109 9.15474 10.6547 9.42661 10.1578 9.92349C9.66329 10.4204 9.38907 11.0766 9.38907 11.7774C9.38907 12.4782 9.66329 13.1344 10.1578 13.6313C10.6547 14.1258 11.3109 14.4001 12.0117 14.4001C12.7125 14.4001 13.3688 14.1258 13.8656 13.6313C14.3602 13.1344 14.6344 12.4782 14.6344 11.7774C14.6344 11.0766 14.3602 10.4204 13.8656 9.92349C13.6229 9.67893 13.3341 9.48504 13.0158 9.35307C12.6976 9.2211 12.3563 9.15368 12.0117 9.15474V9.15474ZM21.675 14.6743L20.1422 13.3641C20.2149 12.9188 20.2524 12.4641 20.2524 12.0118C20.2524 11.5594 20.2149 11.1024 20.1422 10.6594L21.675 9.34927C21.7908 9.25014 21.8737 9.11812 21.9126 8.97075C21.9515 8.82338 21.9447 8.66765 21.893 8.52427L21.8719 8.46333C21.45 7.2837 20.818 6.19026 20.0063 5.23599L19.9641 5.18677C19.8655 5.07087 19.7341 4.98756 19.5873 4.94782C19.4404 4.90807 19.285 4.91375 19.1414 4.96411L17.2383 5.64146C16.5352 5.06489 15.7524 4.61021 14.9039 4.2938L14.536 2.30396C14.5082 2.15405 14.4355 2.01615 14.3275 1.90856C14.2195 1.80097 14.0813 1.72879 13.9313 1.70161L13.868 1.68989C12.6492 1.46958 11.3649 1.46958 10.1461 1.68989L10.0828 1.70161C9.93282 1.72879 9.79463 1.80097 9.68662 1.90856C9.57861 2.01615 9.5059 2.15405 9.47814 2.30396L9.10782 4.30317C8.26742 4.6221 7.48453 5.07569 6.78986 5.64614L4.87267 4.96411C4.72915 4.91335 4.57358 4.90746 4.42664 4.94724C4.2797 4.98701 4.14834 5.07055 4.05001 5.18677L4.00782 5.23599C3.19757 6.19128 2.56565 7.28444 2.1422 8.46333L2.12111 8.52427C2.01564 8.81724 2.10236 9.14536 2.33907 9.34927L3.89064 10.6735C3.81798 11.1141 3.78282 11.5641 3.78282 12.0094C3.78282 12.4594 3.81798 12.9094 3.89064 13.3454L2.34376 14.6696C2.22797 14.7687 2.1451 14.9007 2.10616 15.0481C2.06723 15.1955 2.07407 15.3512 2.12579 15.4946L2.14689 15.5555C2.57111 16.7344 3.19689 17.8243 4.01251 18.7829L4.0547 18.8321C4.15326 18.948 4.28463 19.0313 4.43149 19.071C4.57834 19.1108 4.73379 19.1051 4.87736 19.0547L6.79454 18.3727C7.49298 18.9469 8.27111 19.4016 9.11251 19.7157L9.48282 21.7149C9.51059 21.8648 9.5833 22.0027 9.69131 22.1103C9.79932 22.2179 9.9375 22.2901 10.0875 22.3172L10.1508 22.329C11.3815 22.5505 12.6419 22.5505 13.8727 22.329L13.9359 22.3172C14.086 22.2901 14.2241 22.2179 14.3322 22.1103C14.4402 22.0027 14.5129 21.8648 14.5406 21.7149L14.9086 19.725C15.757 19.4063 16.5399 18.954 17.243 18.3774L19.1461 19.0547C19.2896 19.1055 19.4452 19.1114 19.5921 19.0716C19.7391 19.0318 19.8704 18.9483 19.9688 18.8321L20.011 18.7829C20.8266 17.8196 21.4524 16.7344 21.8766 15.5555L21.8977 15.4946C21.9985 15.204 21.9117 14.8782 21.675 14.6743ZM12.0117 15.8977C9.73595 15.8977 7.89142 14.0532 7.89142 11.7774C7.89142 9.50161 9.73595 7.65708 12.0117 7.65708C14.2875 7.65708 16.132 9.50161 16.132 11.7774C16.132 14.0532 14.2875 15.8977 12.0117 15.8977Z" fill="white"/>
            </svg>
        </button>
        
        <div class="classroom-options">
            <div class="overlay"></div>
            <ul>
                <li class="classroom-action" data-action="manage_classroom" data-tab="tab-classroom" data-schoolid="<?=$school->ID?>" >
                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10.0833 3.66671H3.66659C3.18036 3.66671 2.71404 3.85987 2.37022 4.20368C2.02641 4.5475 1.83325 5.01381 1.83325 5.50005V18.3334C1.83325 18.8196 2.02641 19.2859 2.37022 19.6297C2.71404 19.9736 3.18036 20.1667 3.66659 20.1667H16.4999C16.9861 20.1667 17.4525 19.9736 17.7963 19.6297C18.1401 19.2859 18.3333 18.8196 18.3333 18.3334V11.9167M16.9583 2.29171C17.3229 1.92704 17.8175 1.72217 18.3333 1.72217C18.849 1.72217 19.3436 1.92704 19.7083 2.29171C20.0729 2.65638 20.2778 3.15099 20.2778 3.66671C20.2778 4.18244 20.0729 4.67704 19.7083 5.04171L10.9999 13.75L7.33325 14.6667L8.24992 11L16.9583 2.29171Z" stroke="#6B6F72" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>

                    <span>Manage Classroom</span>
                </li>

                <li class="classroom-action" data-action="broadcast_email" data-schoolid="<?=$school->ID?>" >
                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20.1666 5.50008C20.1666 4.49175 19.3416 3.66675 18.3333 3.66675H3.66659C2.65825 3.66675 1.83325 4.49175 1.83325 5.50008M20.1666 5.50008V16.5001C20.1666 17.5084 19.3416 18.3334 18.3333 18.3334H3.66659C2.65825 18.3334 1.83325 17.5084 1.83325 16.5001V5.50008M20.1666 5.50008L10.9999 11.9167L1.83325 5.50008" stroke="#6B6F72" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>Email Classroom</span>
                </li>

                <li class="classroom-action" data-action="manage_classroom" data-tab="tab-students" data-schoolid="<?=$school->ID?>" >
                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15.5834 19.25V17.4167C15.5834 16.4442 15.1971 15.5116 14.5095 14.8239C13.8218 14.1363 12.8892 13.75 11.9167 13.75H4.58342C3.61095 13.75 2.67832 14.1363 1.99069 14.8239C1.30306 15.5116 0.916748 16.4442 0.916748 17.4167V19.25M21.0834 19.25V17.4167C21.0828 16.6043 20.8124 15.815 20.3147 15.173C19.8169 14.5309 19.12 14.0723 18.3334 13.8692M14.6667 2.86917C15.4555 3.07111 16.1545 3.52981 16.6538 4.17295C17.153 4.81609 17.4239 5.60709 17.4239 6.42125C17.4239 7.23541 17.153 8.02641 16.6538 8.66955C16.1545 9.31269 15.4555 9.77139 14.6667 9.97333M11.9167 6.41667C11.9167 8.44171 10.2751 10.0833 8.25008 10.0833C6.22504 10.0833 4.58342 8.44171 4.58342 6.41667C4.58342 4.39162 6.22504 2.75 8.25008 2.75C10.2751 2.75 11.9167 4.39162 11.9167 6.41667Z" stroke="#6B6F72" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>Manage Students</span>
                </li>

                <li class="classroom-action" data-action="manage_classroom" data-tab="tab-teachers" data-schoolid="<?=$school->ID?>" >
                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20.1869 8.02542V12.2526M5.29658 10.0031V15.7057C5.29658 15.7057 7.50116 17.875 10.5514 17.875C13.6025 17.875 15.8071 15.7057 15.8071 15.7057V10.0031M0.916748 7.975L10.5518 4.125L20.1869 7.975L10.5518 11.825L0.916748 7.975Z" stroke="#6B6F72" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>

                    <span>Manage Teachers</span>
                </li>

                <li  class="classroom-action" data-action="manage_classroom" data-tab="tab-courses" data-schoolid="<?=$school->ID?>">
                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10.9999 6.41667C10.9999 5.44421 10.6136 4.51158 9.92598 3.82394C9.23834 3.13631 8.30571 2.75 7.33325 2.75H1.83325V16.5H8.24992C8.97926 16.5 9.67874 16.7897 10.1945 17.3055C10.7102 17.8212 10.9999 18.5207 10.9999 19.25M10.9999 6.41667V19.25M10.9999 6.41667C10.9999 5.44421 11.3862 4.51158 12.0739 3.82394C12.7615 3.13631 13.6941 2.75 14.6666 2.75H20.1666V16.5H13.7499C13.0206 16.5 12.3211 16.7897 11.8054 17.3055C11.2896 17.8212 10.9999 18.5207 10.9999 19.25" stroke="#6B6F72" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>

                    <span>Manage Courses</span>
                </li>

                <li class="classroom-action" data-action="tab-classroom-settings" data-schoolid="<?=$school->ID?>" >
                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_2537_21395)">
                        <path d="M11.0001 13.7501C12.5189 13.7501 13.7501 12.5189 13.7501 11.0001C13.7501 9.4813 12.5189 8.25008 11.0001 8.25008C9.4813 8.25008 8.25008 9.4813 8.25008 11.0001C8.25008 12.5189 9.4813 13.7501 11.0001 13.7501Z" stroke="#6B6F72" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M17.7834 13.7501C17.6614 14.0266 17.625 14.3333 17.6789 14.6306C17.7328 14.928 17.8746 15.2024 18.0859 15.4184L18.1409 15.4734C18.3114 15.6437 18.4466 15.8459 18.5389 16.0684C18.6311 16.291 18.6786 16.5296 18.6786 16.7705C18.6786 17.0114 18.6311 17.25 18.5389 17.4726C18.4466 17.6951 18.3114 17.8973 18.1409 18.0676C17.9706 18.238 17.7685 18.3733 17.5459 18.4655C17.3233 18.5578 17.0848 18.6053 16.8438 18.6053C16.6029 18.6053 16.3643 18.5578 16.1418 18.4655C15.9192 18.3733 15.717 18.238 15.5467 18.0676L15.4917 18.0126C15.2757 17.8013 15.0013 17.6595 14.704 17.6056C14.4066 17.5517 14.0999 17.5881 13.8234 17.7101C13.5523 17.8263 13.3211 18.0192 13.1582 18.2652C12.9953 18.5111 12.9079 18.7993 12.9067 19.0942V19.2501C12.9067 19.7363 12.7136 20.2026 12.3698 20.5464C12.026 20.8903 11.5596 21.0834 11.0734 21.0834C10.5872 21.0834 10.1209 20.8903 9.77705 20.5464C9.43324 20.2026 9.24008 19.7363 9.24008 19.2501V19.1676C9.23298 18.8642 9.13477 18.5699 8.95822 18.3231C8.78166 18.0762 8.53492 17.8882 8.25008 17.7834C7.9736 17.6614 7.6669 17.625 7.36954 17.6789C7.07218 17.7328 6.79779 17.8746 6.58175 18.0859L6.52675 18.1409C6.35648 18.3114 6.15429 18.4466 5.93172 18.5389C5.70916 18.6311 5.47059 18.6786 5.22967 18.6786C4.98874 18.6786 4.75017 18.6311 4.52761 18.5389C4.30504 18.4466 4.10285 18.3114 3.93258 18.1409C3.76212 17.9706 3.6269 17.7685 3.53464 17.5459C3.44238 17.3233 3.39489 17.0848 3.39489 16.8438C3.39489 16.6029 3.44238 16.3643 3.53464 16.1418C3.6269 15.9192 3.76212 15.717 3.93258 15.5467L3.98758 15.4917C4.19891 15.2757 4.34067 15.0013 4.39459 14.704C4.4485 14.4066 4.4121 14.0999 4.29008 13.8234C4.17388 13.5523 3.98094 13.3211 3.73501 13.1582C3.48908 12.9953 3.20089 12.9079 2.90591 12.9067H2.75008C2.26385 12.9067 1.79754 12.7136 1.45372 12.3698C1.1099 12.026 0.916748 11.5596 0.916748 11.0734C0.916748 10.5872 1.1099 10.1209 1.45372 9.77705C1.79754 9.43324 2.26385 9.24008 2.75008 9.24008H2.83258C3.13599 9.23298 3.43025 9.13477 3.67711 8.95822C3.92396 8.78166 4.11199 8.53492 4.21675 8.25008C4.33877 7.9736 4.37517 7.6669 4.32125 7.36954C4.26734 7.07218 4.12557 6.79779 3.91425 6.58175L3.85925 6.52675C3.68879 6.35648 3.55357 6.15429 3.46131 5.93172C3.36904 5.70916 3.32156 5.47059 3.32156 5.22967C3.32156 4.98874 3.36904 4.75017 3.46131 4.52761C3.55357 4.30504 3.68879 4.10285 3.85925 3.93258C4.02952 3.76212 4.23171 3.6269 4.45427 3.53464C4.67684 3.44238 4.9154 3.39489 5.15633 3.39489C5.39726 3.39489 5.63583 3.44238 5.85839 3.53464C6.08095 3.6269 6.28315 3.76212 6.45342 3.93258L6.50842 3.98758C6.72445 4.19891 6.99885 4.34067 7.29621 4.39459C7.59357 4.4485 7.90027 4.4121 8.17675 4.29008H8.25008C8.5212 4.17388 8.75243 3.98094 8.9153 3.73501C9.07817 3.48908 9.16557 3.20089 9.16675 2.90591V2.75008C9.16675 2.26385 9.3599 1.79754 9.70372 1.45372C10.0475 1.1099 10.5139 0.916748 11.0001 0.916748C11.4863 0.916748 11.9526 1.1099 12.2964 1.45372C12.6403 1.79754 12.8334 2.26385 12.8334 2.75008V2.83258C12.8346 3.12755 12.922 3.41574 13.0849 3.66168C13.2477 3.90761 13.479 4.10055 13.7501 4.21675C14.0266 4.33877 14.3333 4.37517 14.6306 4.32125C14.928 4.26734 15.2024 4.12557 15.4184 3.91425L15.4734 3.85925C15.6437 3.68879 15.8459 3.55357 16.0684 3.46131C16.291 3.36904 16.5296 3.32156 16.7705 3.32156C17.0114 3.32156 17.25 3.36904 17.4726 3.46131C17.6951 3.55357 17.8973 3.68879 18.0676 3.85925C18.238 4.02952 18.3733 4.23171 18.4655 4.45427C18.5578 4.67684 18.6053 4.9154 18.6053 5.15633C18.6053 5.39726 18.5578 5.63583 18.4655 5.85839C18.3733 6.08095 18.238 6.28315 18.0676 6.45342L18.0126 6.50842C17.8013 6.72445 17.6595 6.99885 17.6056 7.29621C17.5517 7.59357 17.5881 7.90027 17.7101 8.17675V8.25008C17.8263 8.5212 18.0192 8.75243 18.2652 8.9153C18.5111 9.07817 18.7993 9.16557 19.0942 9.16675H19.2501C19.7363 9.16675 20.2026 9.3599 20.5464 9.70372C20.8903 10.0475 21.0834 10.5139 21.0834 11.0001C21.0834 11.4863 20.8903 11.9526 20.5464 12.2964C20.2026 12.6403 19.7363 12.8334 19.2501 12.8334H19.1676C18.8726 12.8346 18.5844 12.922 18.3385 13.0849C18.0926 13.2477 17.8996 13.479 17.7834 13.7501Z" stroke="#6B6F72" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
                        </g>
                        <defs>
                        <clipPath id="clip0_2537_21395">
                        <rect width="22" height="22" fill="white"/>
                        </clipPath>
                        </defs>
                    </svg>
                    <span>Classroom Settings</span>
                </li>

                <li class="classroom-action" data-action="archive-classroom" data-tab="archive-classroom" data-schoolid="<?=$school->ID?>">
                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2.75 5.49992H4.58333M4.58333 5.49992H19.25M4.58333 5.49992V18.3333C4.58333 18.8195 4.77649 19.2858 5.1203 19.6296C5.46412 19.9734 5.93044 20.1666 6.41667 20.1666H15.5833C16.0696 20.1666 16.5359 19.9734 16.8797 19.6296C17.2235 19.2858 17.4167 18.8195 17.4167 18.3333V5.49992M7.33333 5.49992V3.66659C7.33333 3.18035 7.52649 2.71404 7.8703 2.37022C8.21412 2.02641 8.68044 1.83325 9.16667 1.83325H12.8333C13.3196 1.83325 13.7859 2.02641 14.1297 2.37022C14.4735 2.71404 14.6667 3.18035 14.6667 3.66659V5.49992M9.16667 10.0833V15.5833M12.8333 10.0833V15.5833" stroke="#6B6F72" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>

                    <span>Archive Classroom</span>
                </li>
            </ul>
        </div>

        <div class="details">

        
            <a href="<?=$school->bp_url?>" class="class-name"><?=$school->post_title?></a>
            <div class="teachers-name">
                <?php 
                $teachers_name = [];
                foreach($school->school_data["teachers"] as $teacher) $teachers_name[] = $teacher->data->display_name;
                echo implode(", ",$teachers_name);
                ?>
            </div>

            <div class="meta">
                <div class="student-count">
                    <svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_2202_18585)">
                    <path d="M11.8333 14V12.6667C11.8333 11.9594 11.5524 11.2811 11.0523 10.781C10.5522 10.281 9.8739 10 9.16666 10H3.83332C3.12608 10 2.4478 10.281 1.94771 10.781C1.44761 11.2811 1.16666 11.9594 1.16666 12.6667V14M15.8333 14V12.6667C15.8329 12.0758 15.6362 11.5018 15.2742 11.0349C14.9122 10.5679 14.4054 10.2344 13.8333 10.0867M11.1667 2.08667C11.7403 2.23353 12.2487 2.56713 12.6117 3.03487C12.9748 3.50261 13.1719 4.07789 13.1719 4.67C13.1719 5.26211 12.9748 5.83739 12.6117 6.30513C12.2487 6.77287 11.7403 7.10647 11.1667 7.25333M9.16666 4.66667C9.16666 6.13943 7.97275 7.33333 6.49999 7.33333C5.02723 7.33333 3.83332 6.13943 3.83332 4.66667C3.83332 3.19391 5.02723 2 6.49999 2C7.97275 2 9.16666 3.19391 9.16666 4.66667Z" stroke="#BFBFBF" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
                    </g>
                    <defs>
                    <clipPath id="clip0_2202_18585">
                    <rect width="16" height="16" fill="white" transform="translate(0.5)"/>
                    </clipPath>
                    </defs>
                    </svg> 
                    
                    <?php 
                    
                    $students_count = sizeof($school->school_data["students"]);
                    if( $students_count == 1){
                        echo $students_count." Student";
                    }else{
                        echo $students_count." Students";
                    }
                
                    ?>
                    
                </div>
                <div class="subject-count">
                    <svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.50001 4.66667C8.50001 3.95942 8.21906 3.28115 7.71896 2.78105C7.21886 2.28095 6.54059 2 5.83334 2H1.83334V12H6.50001C7.03044 12 7.53915 12.2107 7.91422 12.5858C8.2893 12.9609 8.50001 13.4696 8.50001 14M8.50001 4.66667V14M8.50001 4.66667C8.50001 3.95942 8.78096 3.28115 9.28106 2.78105C9.78116 2.28095 10.4594 2 11.1667 2H15.1667V12H10.5C9.96958 12 9.46087 12.2107 9.0858 12.5858C8.71072 12.9609 8.50001 13.4696 8.50001 14" stroke="#BFBFBF" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <?php
                    $subjects_count = sizeof($school->school_data["categories"]);
                    if( $subjects_count == 1){
                        echo $subjects_count." Subject";
                    }else{
                        echo $subjects_count." Subjects";
                    }
                    ?>
                    
                </div>
            </div>
        </div>
    </div>
<?php 
}
?>