<?php 
add_action("wp_head", function(){
    if(isset($_GET["clear_add_payment_meta"])){
        $user_id = get_current_user_id();
        delete_user_meta($user_id, "hide_payment_details_popup");
        delete_user_meta($user_id, "hide_payment_details_updated");
        wp_redirect(site_url());
    }
});

add_action('wp_enqueue_scripts', function(){
    wp_enqueue_style('subscription-payment-details', get_stylesheet_directory_uri() . '/assets/css/subscription-payment-details.css', '', ENQUEUE_VERSION);
});
add_action("wp_footer", function(){

    $user_id = get_current_user_id();
    $hide_payment_details_popup = get_user_meta( $user_id, "hide_payment_details_popup", true);
    $hide_payment_details_updated = get_user_meta( $user_id, "hide_payment_details_updated", true);

    if(empty($hide_payment_details_popup)){
    ?>
    <div id="add-payment-details-popup" class="modal" >

        <!-- Modal content -->
        <div class="modal-content">            
            <span class="close">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 6L6 18" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M6 6L18 18" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </span>
            <div class="main-content">
                <div class="image">
                    <svg width="198" height="140" viewBox="0 0 198 140" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M107.333 139.475L41.9232 140L41.1541 44.1089C41.0808 35.5459 47.9661 28.5464 56.5239 28.4731L96.5416 28.1555C105.099 28.0823 112.095 34.9718 112.168 43.5348L112.888 133.807C112.912 136.91 110.422 139.438 107.333 139.463V139.475Z" fill="#E7E9EE"/>
                        <path opacity="0.34" d="M66.7542 29.2916H41.9232V139.12H66.7542V29.2916Z" fill="#CACCD1"/>
                        <path d="M95.8335 28.18V28.1555L38.7857 28.6197C32.2178 28.6686 26.944 34.2755 26.9928 41.1283L27.0172 43.9623C27.0172 45.0006 27.8718 45.8435 28.9217 45.8313L82.7954 45.3915C83.8575 45.3915 84.7121 44.512 84.7121 43.4493L84.6877 40.6641C84.6388 34.0312 89.5709 28.5831 95.8335 28.18Z" fill="#CACCD1"/>
                        <path d="M54.8271 54.6264C54.4975 54.6264 54.2167 54.3576 54.2167 54.0156C54.2167 53.6736 54.4853 53.4048 54.8271 53.4048L69.3668 53.2827C69.733 53.3315 69.9772 53.5514 69.9772 53.8934C69.9772 54.2355 69.7086 54.5042 69.3668 54.5042L54.8271 54.6264Z" fill="white"/>
                        <path d="M54.9614 71.789C54.6318 71.789 54.351 71.5203 54.351 71.1905C54.351 70.8485 54.6195 70.5797 54.9492 70.5675L101.885 70.1522C102.239 70.1522 102.495 70.4209 102.507 70.7507C102.507 71.0928 102.239 71.3615 101.909 71.3737L54.9736 71.789H54.9614Z" fill="white"/>
                        <path d="M54.705 81.256C54.3632 81.256 54.0946 80.9873 54.0946 80.6452C54.0946 80.3032 54.3632 80.0345 54.705 80.0345L66.7543 80.01C67.0961 80.01 67.3647 80.2788 67.3647 80.6208C67.3647 80.9628 67.0961 81.2316 66.7543 81.2316L54.705 81.256Z" fill="white"/>
                        <path d="M54.9003 63.2138C54.5707 63.2138 54.2899 62.9451 54.2899 62.603C54.2899 62.261 54.5585 61.9923 54.9003 61.9923L75.6417 61.8213C75.9713 61.8213 76.2521 62.09 76.2521 62.432C76.2521 62.7741 75.9835 63.0428 75.6417 63.0428L54.9003 63.2138Z" fill="white"/>
                        <path d="M80.6591 63.0062C80.3295 63.0062 80.0487 62.7374 80.0487 62.3954C80.0487 62.0533 80.3173 61.7846 80.6591 61.7846L101.421 61.7602C101.75 61.7602 102.031 62.0289 102.031 62.371C102.031 62.713 101.762 62.9817 101.421 62.9817L80.6591 63.0062Z" fill="white"/>
                        <path d="M75.6295 54.5286C75.2876 54.5286 75.0191 54.2599 75.0191 53.9179C75.0191 53.5758 75.2876 53.3071 75.6295 53.3071L101.408 53.2827C101.75 53.2827 102.019 53.5514 102.019 53.8934C102.019 54.2355 101.75 54.5042 101.408 54.5042L75.6295 54.5286Z" fill="white"/>
                        <path d="M54.8271 91.1383C54.4975 91.1383 54.2167 90.8695 54.2167 90.5275C54.2167 90.1855 54.4853 89.9167 54.8271 89.9167L69.3668 89.7946C69.733 89.8434 69.9772 90.0633 69.9772 90.4054C69.9772 90.7474 69.7086 91.0161 69.3668 91.0161L54.8271 91.1383Z" fill="white"/>
                        <path d="M54.9614 108.289C54.6318 108.289 54.351 108.02 54.351 107.69C54.351 107.348 54.6195 107.079 54.9492 107.067L83.821 106.652C84.175 106.652 84.4314 106.921 84.4436 107.25C84.4436 107.592 84.175 107.861 83.8454 107.873L54.9736 108.289H54.9614Z" fill="white"/>
                        <path d="M54.705 117.756C54.3632 117.756 54.0946 117.487 54.0946 117.145C54.0946 116.803 54.3632 116.534 54.705 116.534L66.7543 116.51C67.0961 116.51 67.3647 116.778 67.3647 117.121C67.3647 117.463 67.0961 117.731 66.7543 117.731L54.705 117.756Z" fill="white"/>
                        <path d="M54.9003 99.7135C54.5707 99.7135 54.2899 99.4448 54.2899 99.1027C54.2899 98.7607 54.5585 98.492 54.9003 98.492L75.6417 98.321C75.9713 98.321 76.2521 98.5897 76.2521 98.9317C76.2521 99.2738 75.9835 99.5425 75.6417 99.5425L54.9003 99.7135Z" fill="white"/>
                        <path d="M80.6591 99.5059C80.3295 99.5059 80.0487 99.2371 80.0487 98.8951C80.0487 98.553 80.3173 98.2843 80.6591 98.2843L83.3571 98.2599C83.6867 98.2599 83.9675 98.5286 83.9675 98.8706C83.9675 99.2127 83.6989 99.4814 83.3571 99.4814L80.6591 99.5059Z" fill="white"/>
                        <path d="M151.99 75.9789H69.2691C66.6666 75.9789 64.5568 78.09 64.5568 80.6941V135.26C64.5568 137.865 66.6666 139.976 69.2691 139.976H151.99C154.593 139.976 156.703 137.865 156.703 135.26V80.6941C156.703 78.09 154.593 75.9789 151.99 75.9789Z" fill="#3579F8"/>
                        <path d="M76.484 75.9789H152.381C154.774 75.9789 156.715 77.9212 156.715 80.3154V130.362C156.715 132.756 154.774 134.699 152.381 134.699H76.484C74.0912 134.699 72.1501 132.756 72.1501 130.362V80.3154C72.1501 77.9212 74.0912 75.9789 76.484 75.9789Z" fill="#5F94F7"/>
                        <path d="M87.1416 113.932H77.0212C76.7648 113.944 76.5573 113.798 76.5573 113.602V112.014C76.5573 111.831 76.7648 111.672 77.0089 111.672H87.1293C87.3857 111.66 87.5933 111.807 87.5933 112.002V113.59C87.5933 113.773 87.3857 113.932 87.1416 113.932Z" fill="#463F88"/>
                        <path d="M100.106 113.908H89.986C89.7296 113.92 89.5221 113.773 89.5221 113.578V111.99C89.5221 111.807 89.7296 111.648 89.9738 111.648H100.094C100.351 111.636 100.558 111.782 100.558 111.978V113.566C100.558 113.749 100.351 113.908 100.106 113.908Z" fill="#463F88"/>
                        <path d="M112.803 113.883H102.682C102.426 113.896 102.218 113.749 102.218 113.554V111.966C102.218 111.782 102.426 111.624 102.67 111.624H112.79C113.047 111.611 113.254 111.758 113.254 111.953V113.541C113.254 113.725 113.047 113.883 112.803 113.883Z" fill="#463F88"/>
                        <path d="M125.487 113.871H115.366C115.11 113.883 114.902 113.737 114.902 113.541V111.953C114.902 111.77 115.11 111.611 115.354 111.611H125.475C125.731 111.599 125.938 111.746 125.938 111.941V113.529C125.938 113.712 125.731 113.871 125.487 113.871Z" fill="#463F88"/>
                        <path d="M86.055 118.22H76.8014C76.5206 118.232 76.2886 118.122 76.2886 117.988V117.426C76.2886 117.292 76.5206 117.182 76.8014 117.182H86.055C86.3358 117.169 86.5677 117.279 86.5677 117.414V117.976C86.5677 118.11 86.3358 118.22 86.055 118.22Z" fill="white"/>
                        <path d="M99.1786 118.171H89.925C89.6442 118.183 89.4122 118.073 89.4122 117.939V117.377C89.4122 117.243 89.6442 117.133 89.925 117.133H99.1786C99.4594 117.121 99.6913 117.23 99.6913 117.365V117.927C99.6913 118.061 99.4594 118.171 99.1786 118.171Z" fill="white"/>
                        <path d="M111.948 118.195H102.694C102.414 118.208 102.182 118.098 102.182 117.963V117.401C102.182 117.267 102.414 117.157 102.694 117.157H111.948C112.229 117.145 112.461 117.255 112.461 117.389V117.951C112.461 118.086 112.229 118.195 111.948 118.195Z" fill="white"/>
                        <path d="M85.7471 126.242L76.5057 126.257C76.2225 126.257 75.9933 126.487 75.9938 126.771L75.9956 127.919C75.996 128.202 76.226 128.431 76.5091 128.431L85.7505 128.416C86.0337 128.416 86.2629 128.186 86.2625 127.903L86.2607 126.754C86.2602 126.471 86.0303 126.242 85.7471 126.242Z" fill="#FAC666"/>
                        <path d="M91.4632 104.539H77.9367C77.1921 104.539 76.5817 103.928 76.5817 103.17V99.1027V95.3648C76.5817 94.6197 77.1921 94.0089 77.9367 94.0089H91.4632C92.2079 94.0089 92.8183 94.6197 92.8183 95.377V103.183C92.8183 103.928 92.2079 104.539 91.4632 104.539Z" fill="#FAC666"/>
                        <path d="M84.5778 105.333C84.236 105.333 83.9674 105.064 83.9674 104.722V94.0211C83.9674 93.6791 84.236 93.4104 84.5778 93.4104C84.9196 93.4104 85.1882 93.6791 85.1882 94.0211V104.722C85.1882 105.064 84.9196 105.333 84.5778 105.333Z" fill="#3579F8"/>
                        <path d="M84.5778 101.631C85.9735 101.631 87.1049 100.499 87.1049 99.1028C87.1049 97.7062 85.9735 96.5742 84.5778 96.5742C83.1822 96.5742 82.0508 97.7062 82.0508 99.1028C82.0508 100.499 83.1822 101.631 84.5778 101.631Z" fill="#FAC666"/>
                        <path d="M84.5778 102.242C84.4313 102.242 84.2848 102.242 84.1261 102.205C83.296 102.083 82.5635 101.656 82.063 100.984C81.5625 100.312 81.3549 99.4814 81.4648 98.663C81.5869 97.8323 82.0142 97.0994 82.6856 96.5986C83.357 96.0977 84.175 95.8779 85.0051 96C85.8353 96.1222 86.5677 96.5497 87.0683 97.2216C87.5688 97.8934 87.7885 98.7119 87.6665 99.5425C87.5444 100.373 87.1171 101.106 86.4457 101.607C85.8963 102.022 85.2493 102.23 84.5656 102.23L84.5778 102.242ZM84.5778 97.1849C84.1628 97.1849 83.7721 97.3193 83.4303 97.5636C83.0274 97.869 82.7589 98.321 82.6856 98.8218C82.5391 99.8723 83.2716 100.837 84.3093 100.984C85.3592 101.131 86.3236 100.398 86.4701 99.3593C86.5433 98.8462 86.409 98.3454 86.1038 97.9423C85.7986 97.5269 85.3469 97.2704 84.8464 97.1971C84.7488 97.1849 84.6633 97.1727 84.5778 97.1727V97.1849Z" fill="#3579F8"/>
                        <path d="M133.996 89.929C133.984 87.9623 134.814 86.2033 136.144 84.9573C134.936 83.8701 133.349 83.2105 131.591 83.2227C127.88 83.2471 124.889 86.2888 124.913 90.0023C124.937 93.7157 127.977 96.7085 131.688 96.6841C133.434 96.6719 135.021 95.9878 136.218 94.8762C134.862 93.6547 134.008 91.9079 133.996 89.9412V89.929Z" fill="#EF746F"/>
                        <path d="M143.042 83.1616C141.296 83.1738 139.709 83.8579 138.513 84.9695C137.182 86.2155 136.352 87.9745 136.364 89.9412C136.376 91.9079 137.243 93.6547 138.586 94.8762C139.794 95.9634 141.382 96.623 143.139 96.6108C146.851 96.5864 149.842 93.5447 149.817 89.8312C149.793 86.1177 146.753 83.125 143.042 83.1494V83.1616Z" fill="#FAC666"/>
                        <path d="M129.967 58.3154H135.29C135.705 58.3154 136.034 58.6575 136.01 59.0606L135.79 65.4492C135.766 66.0967 136.535 66.4509 137.011 65.9989L145.032 58.4987C145.166 58.3765 145.349 58.3032 145.532 58.3032H156.788C157.667 58.3032 158.375 57.5947 158.375 56.7152V29.8779C158.375 28.9984 157.667 28.2899 156.788 28.2899H129.967C129.088 28.2899 128.38 28.9984 128.38 29.8779V56.7152C128.38 57.5947 129.088 58.3032 129.967 58.3032V58.3154Z" fill="#EF746F"/>
                        <path d="M143.726 53.93C137.927 53.93 133.202 49.2026 133.202 43.4003C133.202 37.598 137.927 32.8706 143.726 32.8706C149.524 32.8706 154.249 37.598 154.249 43.4003C154.249 49.2026 149.524 53.93 143.726 53.93ZM143.726 34.0922C138.598 34.0922 134.423 38.2698 134.423 43.4003C134.423 48.5308 138.598 52.7085 143.726 52.7085C148.853 52.7085 153.028 48.5308 153.028 43.4003C153.028 38.2698 148.853 34.0922 143.726 34.0922Z" fill="white"/>
                        <path d="M141.658 46.4492C141.537 46.4492 141.416 46.4027 141.325 46.3098L139.541 44.4831C139.39 44.3283 139.39 44.0806 139.541 43.9257C139.693 43.7709 139.934 43.7709 140.086 43.9257L141.658 45.5358L147.372 39.6839C147.523 39.5291 147.765 39.5291 147.916 39.6839C148.067 39.8387 148.067 40.0864 147.916 40.2412L141.869 46.4337H141.658V46.4492Z" fill="white"/>
                        <path d="M164.601 50.9007H154.615C153.071 50.9007 151.819 52.1531 151.819 53.698V63.6902C151.819 65.2351 153.071 66.4876 154.615 66.4876H164.601C166.145 66.4876 167.397 65.2351 167.397 63.6902V53.698C167.397 52.1531 166.145 50.9007 164.601 50.9007Z" fill="#FAC666"/>
                        <path d="M159.608 62.3587C157.594 62.3587 155.958 60.7219 155.958 58.7063C155.958 56.6908 157.594 55.0539 159.608 55.0539C161.622 55.0539 163.258 56.6908 163.258 58.7063C163.258 60.7219 161.622 62.3587 159.608 62.3587ZM159.608 55.6647C157.936 55.6647 156.568 57.0328 156.568 58.7063C156.568 60.3798 157.936 61.748 159.608 61.748C161.28 61.748 162.648 60.3798 162.648 58.7063C162.648 57.0328 161.28 55.6647 159.608 55.6647Z" fill="white"/>
                        <path d="M159.535 59.6469C159.437 59.6469 159.339 59.6103 159.266 59.537L157.826 58.0955C157.704 57.9734 157.704 57.7779 157.826 57.6558C157.948 57.5336 158.143 57.5336 158.265 57.6558L159.535 58.9262L164.149 54.3088C164.271 54.1866 164.467 54.1866 164.589 54.3088C164.711 54.4309 164.711 54.6264 164.589 54.7485L159.706 59.6347H159.535V59.6469Z" fill="white"/>
                        <path d="M160.341 140C170.097 140 178.005 132.086 178.005 122.324C178.005 112.562 170.097 104.649 160.341 104.649C150.584 104.649 142.676 112.562 142.676 122.324C142.676 132.086 150.584 140 160.341 140Z" fill="#F9A541"/>
                        <path d="M160.34 135.309C167.218 135.309 172.793 129.731 172.793 122.85C172.793 115.968 167.218 110.39 160.34 110.39C153.463 110.39 147.888 115.968 147.888 122.85C147.888 129.731 153.463 135.309 160.34 135.309Z" fill="#FAC666"/>
                        <path d="M160.34 129.825C164.48 129.825 167.836 126.467 167.836 122.324C167.836 118.182 164.48 114.824 160.34 114.824C156.201 114.824 152.845 118.182 152.845 122.324C152.845 126.467 156.201 129.825 160.34 129.825Z" fill="#FAC666"/>
                        <path d="M169.289 123.595C169.99 123.595 170.559 123.026 170.559 122.324C170.559 121.623 169.99 121.054 169.289 121.054C168.588 121.054 168.019 121.623 168.019 122.324C168.019 123.026 168.588 123.595 169.289 123.595Z" fill="#FAC666"/>
                        <path d="M151.38 123.595C152.081 123.595 152.649 123.026 152.649 122.324C152.649 121.623 152.081 121.054 151.38 121.054C150.679 121.054 150.11 121.623 150.11 122.324C150.11 123.026 150.679 123.595 151.38 123.595Z" fill="#FAC666"/>
                        <path d="M185.311 76.6558C186.513 76.5163 187.605 75.5477 187.714 74.2536C187.791 73.2462 188.465 68.8136 188.465 68.8136C188.465 68.8136 189.039 73.2617 189.217 74.2536C189.481 75.7259 190.364 76.4776 191.619 76.6558C192.619 76.7953 197.059 77.4153 197.059 77.4153C197.059 77.4153 192.619 78.043 191.619 78.1747C190.023 78.3839 189.38 79.4068 189.217 80.577C189.085 81.5766 188.458 86.017 188.458 86.017C188.458 86.017 187.799 81.5844 187.698 80.577C187.559 79.2286 186.575 78.3142 185.296 78.1747C184.296 78.0662 179.856 77.423 179.856 77.423C179.856 77.423 184.296 76.7798 185.296 76.6713L185.311 76.6558Z" fill="white" fill-opacity="0.5"/>
                        <path d="M6.39617 111.063C7.59731 110.923 8.68996 109.954 8.79845 108.66C8.87594 107.653 9.55013 103.22 9.55013 103.22C9.55013 103.22 10.1236 107.668 10.3018 108.66C10.5653 110.133 11.4487 110.884 12.7041 111.063C13.7037 111.202 18.1441 111.822 18.1441 111.822C18.1441 111.822 13.7037 112.45 12.7041 112.581C11.1077 112.791 10.4645 113.814 10.3018 114.984C10.1701 115.983 9.54237 120.424 9.54237 120.424C9.54237 120.424 8.88367 115.991 8.78293 114.984C8.64345 113.635 7.65931 112.721 6.38068 112.581C5.38102 112.473 0.940674 111.83 0.940674 111.83C0.940674 111.83 5.38102 111.187 6.38068 111.078L6.39617 111.063Z" fill="white" fill-opacity="0.5"/>
                        <path d="M87.9232 5.09747C88.7039 5.00681 89.4142 4.37718 89.4847 3.536C89.5351 2.88118 89.9733 0 89.9733 0C89.9733 0 90.346 2.89126 90.4619 3.536C90.6331 4.49303 91.2073 4.98162 92.0233 5.09747C92.6731 5.18814 95.5593 5.59111 95.5593 5.59111C95.5593 5.59111 92.6731 5.9991 92.0233 6.08473C90.9857 6.22073 90.5677 6.88562 90.4619 7.64622C90.3762 8.29599 89.9682 11.1822 89.9682 11.1822C89.9682 11.1822 89.5401 8.30103 89.4746 7.64622C89.3839 6.76977 88.7442 6.1754 87.9131 6.08473C87.2634 6.01422 84.3771 5.59614 84.3771 5.59614C84.3771 5.59614 87.2634 5.17807 87.9131 5.10755L87.9232 5.09747Z" fill="white" fill-opacity="0.5"/>
                    </svg>

                </div>

                <h2>Secure Your Access to Journey2Jannah!</h2>

                <p class="description"></p>

                <a target="_blank" href="/?action=safarpublications_sso_login" type="button">Add Payment Details</a>
            </div>
        </div>

    </div>
    <?php 
    }

    if(empty($hide_payment_details_updated)){
    ?>
    <div id="payment-details-updated" class="modal" >

        <!-- Modal content -->
        <div class="modal-content">            
            <span class="close">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 6L6 18" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M6 6L18 18" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </span>
            <div class="main-content">
                <div class="image">
                    <svg width="214" height="120" viewBox="0 0 214 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M87.0554 75.5831C86.6969 75.5831 86.3916 75.2908 86.3916 74.9189C86.3916 74.547 86.6837 74.2547 87.0554 74.2547L89.9892 74.2281C90.3477 74.2281 90.653 74.5204 90.653 74.8923C90.653 75.2643 90.3609 75.5565 89.9892 75.5565L87.0554 75.5831Z" fill="white"/>
                    <path d="M91.3173 77.8944C92.835 77.8944 94.0653 76.6633 94.0653 75.1447C94.0653 73.6261 92.835 72.3951 91.3173 72.3951C89.7997 72.3951 88.5693 73.6261 88.5693 75.1447C88.5693 76.6633 89.7997 77.8944 91.3173 77.8944Z" fill="#FAC666"/>
                    <path d="M156.175 29.3529H39.6904C36.0256 29.3529 33.0547 32.3256 33.0547 35.9926V112.831C33.0547 116.498 36.0256 119.471 39.6904 119.471H156.175C159.84 119.471 162.811 116.498 162.811 112.831V35.9926C162.811 32.3256 159.84 29.3529 156.175 29.3529Z" fill="#3579F8"/>
                    <path d="M49.8498 29.3529H156.725C160.095 29.3529 162.828 32.0879 162.828 35.4593V105.933C162.828 109.305 160.095 112.04 156.725 112.04H49.8498C46.4804 112.04 43.7471 109.305 43.7471 105.933V35.4593C43.7471 32.0879 46.4804 29.3529 49.8498 29.3529Z" fill="#5F94F7"/>
                    <path d="M64.8576 82.7974H50.6064C50.2454 82.8146 49.9531 82.6082 49.9531 82.3329V80.0968C49.9531 79.8388 50.2454 79.6151 50.5892 79.6151H64.8404C65.2014 79.5979 65.4936 79.8043 65.4936 80.0796V82.3157C65.4936 82.5738 65.2014 82.7974 64.8576 82.7974Z" fill="#463F88"/>
                    <path d="M83.1144 82.763H68.8632C68.5022 82.7802 68.21 82.5738 68.21 82.2986V80.0624C68.21 79.8044 68.5022 79.5808 68.846 79.5808H83.0972C83.4582 79.5636 83.7505 79.77 83.7505 80.0452V82.2814C83.7505 82.5394 83.4582 82.763 83.1144 82.763Z" fill="#463F88"/>
                    <path d="M100.992 82.7286H86.7411C86.3801 82.7458 86.0879 82.5394 86.0879 82.2642V80.028C86.0879 79.77 86.3801 79.5464 86.7239 79.5464H100.975C101.336 79.5292 101.628 79.7356 101.628 80.0108V82.247C101.628 82.505 101.336 82.7286 100.992 82.7286Z" fill="#463F88"/>
                    <path d="M118.854 82.7114H104.602C104.241 82.7286 103.949 82.5222 103.949 82.247V80.0108C103.949 79.7528 104.241 79.5292 104.585 79.5292H118.836C119.197 79.512 119.49 79.7184 119.49 79.9936V82.2298C119.49 82.4878 119.197 82.7114 118.854 82.7114Z" fill="#463F88"/>
                    <path d="M63.3279 88.8351H50.2972C49.9018 88.8523 49.5752 88.6975 49.5752 88.5083V87.717C49.5752 87.5278 49.9018 87.373 50.2972 87.373H63.3279C63.7233 87.3558 64.0499 87.5106 64.0499 87.6998V88.4911C64.0499 88.6803 63.7233 88.8351 63.3279 88.8351Z" fill="white"/>
                    <path d="M81.8083 88.7663H68.7777C68.3823 88.7835 68.0557 88.6287 68.0557 88.4394V87.6482C68.0557 87.459 68.3823 87.3042 68.7777 87.3042H81.8083C82.2037 87.287 82.5303 87.4418 82.5303 87.631V88.4222C82.5303 88.6115 82.2037 88.7663 81.8083 88.7663Z" fill="white"/>
                    <path d="M99.7898 88.8007H86.7591C86.3637 88.8179 86.0371 88.6631 86.0371 88.4739V87.6826C86.0371 87.4934 86.3637 87.3386 86.7591 87.3386H99.7898C100.185 87.3214 100.512 87.4762 100.512 87.6654V88.4567C100.512 88.6459 100.185 88.8007 99.7898 88.8007Z" fill="white"/>
                    <path d="M62.8937 100.132L49.8802 100.152C49.4815 100.153 49.1587 100.477 49.1593 100.876L49.1619 102.493C49.1625 102.892 49.4863 103.215 49.885 103.214L62.8985 103.194C63.2972 103.193 63.62 102.869 63.6194 102.47L63.6168 100.853C63.6162 100.454 63.2924 100.131 62.8937 100.132Z" fill="#FAC666"/>
                    <path d="M70.9439 69.5696H51.8965C50.8478 69.5696 49.9883 68.7095 49.9883 67.643V61.915V56.6514C49.9883 55.6021 50.8478 54.742 51.8965 54.742H70.9439C71.9926 54.742 72.8521 55.6021 72.8521 56.6686V67.6602C72.8521 68.7095 71.9926 69.5696 70.9439 69.5696Z" fill="#FAC666"/>
                    <path d="M61.2472 70.6877C60.7659 70.6877 60.3877 70.3093 60.3877 69.8276V54.7592C60.3877 54.2776 60.7659 53.8992 61.2472 53.8992C61.7286 53.8992 62.1068 54.2776 62.1068 54.7592V69.8276C62.1068 70.3093 61.7286 70.6877 61.2472 70.6877Z" fill="#3579F8"/>
                    <path d="M61.2473 66.3357C61.041 66.3357 60.8347 66.3357 60.6112 66.2841C59.4422 66.1121 58.4108 65.5101 57.7059 64.564C57.0011 63.6179 56.7089 62.4482 56.8636 61.2957C57.0355 60.126 57.6372 59.094 58.5827 58.3887C59.5282 57.6835 60.68 57.3738 61.8489 57.5458C63.0179 57.7179 64.0494 58.3199 64.7542 59.266C65.459 60.2121 65.7684 61.3645 65.5965 62.5342C65.4246 63.7039 64.823 64.736 63.8775 65.4413C63.1039 66.0261 62.1928 66.3185 61.2301 66.3185L61.2473 66.3357ZM61.2473 59.2144C60.6628 59.2144 60.1127 59.4036 59.6313 59.7476C59.064 60.1776 58.6858 60.8141 58.5827 61.5194C58.3764 62.9987 59.4078 64.3576 60.8691 64.564C62.3475 64.7704 63.7055 63.7383 63.9118 62.2762C64.015 61.5538 63.8259 60.8485 63.3961 60.2809C62.9663 59.696 62.3303 59.3348 61.6255 59.2316C61.4879 59.2144 61.3676 59.1972 61.2473 59.1972V59.2144Z" fill="#3579F8"/>
                    <path d="M130.836 48.9968C130.819 46.2274 131.988 43.7504 133.862 41.9958C132.16 40.4649 129.925 39.5361 127.449 39.5533C122.223 39.5877 118.012 43.8708 118.046 49.1C118.08 54.3292 122.361 58.5435 127.587 58.5091C130.045 58.4919 132.28 57.5287 133.965 55.9633C132.057 54.2432 130.853 51.7834 130.836 49.014V48.9968Z" fill="#EF746F"/>
                    <path d="M143.574 39.4672C141.116 39.4844 138.881 40.4477 137.197 42.013C135.323 43.7676 134.154 46.2446 134.171 49.014C134.188 51.7834 135.409 54.2432 137.3 55.9633C139.002 57.4943 141.237 58.4231 143.712 58.4059C148.938 58.3715 153.15 54.0884 153.115 48.8592C153.081 43.63 148.8 39.4156 143.574 39.45V39.4672Z" fill="#FAC666"/>
                    <path d="M168.392 120C182.13 120 193.267 108.856 193.267 95.1096C193.267 81.3631 182.13 70.2193 168.392 70.2193C154.654 70.2193 143.517 81.3631 143.517 95.1096C143.517 108.856 154.654 120 168.392 120Z" fill="#F9A541"/>
                    <path d="M168.092 112.351C177.776 112.351 185.627 104.496 185.627 94.8055C185.627 85.1155 177.776 77.2601 168.092 77.2601C158.408 77.2601 150.558 85.1155 150.558 94.8055C150.558 104.496 158.408 112.351 168.092 112.351Z" fill="#FAC666"/>
                    <path d="M163.569 102.607C163.321 102.607 163.074 102.512 162.888 102.322L159.238 98.5838C158.929 98.267 158.929 97.7601 159.238 97.4433C159.547 97.1265 160.042 97.1265 160.352 97.4433L163.569 100.738L175.262 88.763C175.572 88.4463 176.067 88.4463 176.376 88.763C176.685 89.0798 176.685 89.5867 176.376 89.9035L164.002 102.575H163.569V102.607Z" fill="white"/>
                    <path d="M200.858 50.7352C202.164 50.5835 203.353 49.5301 203.471 48.1229C203.555 47.0274 204.288 42.2072 204.288 42.2072C204.288 42.2072 204.912 47.0442 205.105 48.1229C205.392 49.724 206.353 50.5413 207.718 50.7352C208.805 50.8868 213.633 51.561 213.633 51.561C213.633 51.561 208.805 52.2436 207.718 52.3868C205.982 52.6144 205.282 53.7267 205.105 54.9992C204.962 56.0862 204.28 60.9148 204.28 60.9148C204.28 60.9148 203.563 56.0946 203.454 54.9992C203.302 53.5329 202.232 52.5385 200.841 52.3868C199.754 52.2689 194.926 51.5694 194.926 51.5694C194.926 51.5694 199.754 50.87 200.841 50.752L200.858 50.7352Z" fill="white" fill-opacity="0.5"/>
                    <path d="M6.29968 88.1503C7.60584 87.9986 8.79403 86.9453 8.912 85.538C8.99627 84.4425 9.72941 79.6224 9.72941 79.6224C9.72941 79.6224 10.353 84.4594 10.5468 85.538C10.8333 87.1391 11.794 87.9565 13.1591 88.1503C14.2462 88.302 19.0748 88.9762 19.0748 88.9762C19.0748 88.9762 14.2462 89.6587 13.1591 89.802C11.4232 90.0295 10.7238 91.1419 10.5468 92.4143C10.4036 93.5014 9.72097 98.3299 9.72097 98.3299C9.72097 98.3299 9.00468 93.5098 8.89513 92.4143C8.74345 90.948 7.67326 89.9537 6.28284 89.802C5.19578 89.684 0.367188 88.9846 0.367188 88.9846C0.367188 88.9846 5.19578 88.2852 6.28284 88.1672L6.29968 88.1503Z" fill="white" fill-opacity="0.5"/>
                    <path d="M94.9548 5.54317C95.8038 5.44457 96.5761 4.7599 96.6528 3.84517C96.7075 3.1331 97.1841 0 97.1841 0C97.1841 0 97.5894 3.14405 97.7154 3.84517C97.9016 4.88588 98.526 5.41719 99.4134 5.54317C100.12 5.64176 103.259 6.07996 103.259 6.07996C103.259 6.07996 100.12 6.52363 99.4134 6.61675C98.285 6.76464 97.8304 7.48767 97.7154 8.31476C97.6223 9.02135 97.1786 12.1599 97.1786 12.1599C97.1786 12.1599 96.713 9.02683 96.6418 8.31476C96.5432 7.36169 95.8476 6.71534 94.9438 6.61675C94.2372 6.54007 91.0986 6.08544 91.0986 6.08544C91.0986 6.08544 94.2372 5.63081 94.9438 5.55413L94.9548 5.54317Z" fill="white" fill-opacity="0.5"/>
                    </svg>


                </div>

                <h2>Payment Details Updated</h2>

                <p >
                Thank you for updating your payment details! Your<br/>continued access to Journey2Jannah is assured. Start<br/>your learning journey now!
                </p>

                <a href="/" class="button">Back to Dashboard</a>
            </div>
        </div>

    </div>
    <?php
    }
});


// this is to add a fake component to BuddyPress. A registered component is needed to add notifications
function custom_filter_notifications_get_registered_components( $component_names = array() ) {
    // Force $component_names to be an array
    if ( ! is_array( $component_names ) ) {
        $component_names = array();
    }
    // Add 'custom' component to registered components array
    array_push( $component_names, 'payment_notification' );
    // Return component's with 'custom' appended
    return $component_names;
}
add_filter( 'bp_notifications_get_registered_components', 'custom_filter_notifications_get_registered_components' );

// this gets the saved item id, compiles some data and then displays the notification
function custom_format_buddypress_notifications( $action, $item_id, $secondary_item_id, $total_items, $format = 'string' ) {
    // New custom notifications


    if ( 'payment_notification_action' === $action ) {

        /*
        $comment = get_comment( $item_id );

        $custom_title = $comment->comment_author . ' commented on the post ' . get_the_title( $comment->comment_post_ID );
        $custom_link  = get_comment_link( $comment );
        $custom_text = $comment->comment_author . ' commented on your post ' . get_the_title( $comment->comment_post_ID );
        */
        // WordPress Toolbar
        $post = get_post($item_id);
        $svg = '<svg width="9" height="9" viewBox="0 0 9 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7.33123 7.33123C9.00835 5.65411 9.00835 2.93496 7.33123 1.25784C5.65411 -0.41928 2.93496 -0.41928 1.25784 1.25784C-0.41928 2.93496 -0.41928 5.65411 1.25784 7.33123C2.93496 9.00835 5.65411 9.00835 7.33123 7.33123Z" fill="#EF746F"/>
            </svg>';
        $return = "<div class='bb-custom-payment-notification' >
                        <a href='/?action=safarpublications_sso_login' target='_blank'>
                            <div class='top' style='display:grid; grid-template-columns:1fr 10px; align-items:center;'>
                                <h5 style='padding:0px;margin:0px;'>".$post->post_title."</h5>
                                ".$svg."
                            </div>
                            
                            <p style='padding:0px;margin:0px; margin-top:10px;'>".$post->post_content."<p>
                        </a>
                </div>";


        return $return;

    }

}
add_filter( 'bp_notifications_get_notifications_for_user', 'custom_format_buddypress_notifications', 10, 5 );

add_action("wp_ajax_hide_payment_details_popup", function(){
    update_user_meta( get_current_user_id(), "hide_payment_details_popup", ["date"=>date("Y-m-d H:i:s")]);
});

add_action("wp_ajax_hide_payment_details_updated", function(){
    update_user_meta( get_current_user_id(), "hide_payment_details_updated", ["date"=>date("Y-m-d H:i:s")]);
});
?>